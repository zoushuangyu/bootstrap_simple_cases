;(function($,undefined){"use strict";var pluginName='scojs_modal';function Modal(options){this.options=$.extend({},$.fn[pluginName].defaults,options);this.$modal=$(this.options.target).attr('class','modal fade').hide();var self=this;function init(){if(self.options.title===''){self.options.title='&nbsp;'}};init()}$.extend(Modal.prototype,{show:function(){var self=this,$backdrop;if(!this.options.nobackdrop){$backdrop=$('.modal-backdrop')}if(!this.$modal.length){this.$modal=$('<div class="modal fade" id="'+this.options.target.substr(1)+'"><div class="modal-header"><a class="close" href="#" data-dismiss="modal">×</a><h3>&nbsp;</h3></div><div class="inner"/></div>').appendTo(this.options.appendTo).hide()}this.$modal.find('.modal-header h3').html(this.options.title);if(this.options.cssclass!==undefined){this.$modal.attr('class','modal fade '+this.options.cssclass)}if(this.options.width!==undefined){this.$modal.width(this.options.width)}if(this.options.left!==undefined){this.$modal.css({'left':this.options.left})}if(this.options.height!==undefined){this.$modal.height(this.options.height)}if(this.options.top!==undefined){this.$modal.css({'top':this.options.top})}if(this.options.keyboard){this.escape()}if(!this.options.nobackdrop){if(!$backdrop.length){$backdrop=$('<div class="modal-backdrop fade" />').appendTo(this.options.appendTo)}$backdrop[0].offsetWidth;$backdrop.addClass('in')}this.$modal.off('close.'+pluginName).on('close.'+pluginName,function(){self.close.call(self)});if(this.options.remote!==undefined&&this.options.remote!=''&&this.options.remote!=='#'){var spinner;if(typeof Spinner=='function'){spinner=new Spinner({color:'#3d9bce'}).spin(this.$modal[0])}this.$modal.find('.inner').load(this.options.remote,function(){if(spinner){spinner.stop()}if(self.options.cache){self.options.content=$(this).html();delete self.options.remote}})}else if(this.options.content==''&&this.options.cssclass=='modal-loading'){this.$modal.find('.inner').html("<p><i class='fa fa-lg fa-spinner fa-spin'></i>加载中，请稍后...</p>")}else if(this.options.content==''&&this.options.cssclass=='modal-print'){this.$modal.find('.inner').html("<p><i class='fa fa-lg fa-print'></i>打印中，请稍后...</p>")}else if(this.options.content==''&&this.options.cssclass=='modal-output'){this.$modal.find('.inner').html("<p><i class='fa fa-lg fa-send'></i>导出进行中，请稍后...</p>")}else{this.$modal.find('.inner').html(this.options.content)}this.$modal.show().addClass('in');return this},close:function(){this.$modal.hide().off('.'+pluginName).find('.inner').html('');$(document).off('keyup.'+pluginName);$('.modal-backdrop').remove();if(typeof this.options.onClose==='function'){this.options.onClose.call(this,this.options)}return this},destroy:function(){this.$modal.remove();$(document).off('keyup.'+pluginName);$('.modal-backdrop').remove();this.$modal=null;return this},escape:function(){var self=this;$(document).on('keyup.'+pluginName,function(e){if(e.which==27){self.close()}})}});$.fn[pluginName]=function(options){return this.each(function(){var obj;if(!(obj=$.data(this,pluginName))){var $this=$(this),data=$this.data(),opts=$.extend({},options,data);if($this.attr('href')!==''&&$this.attr('href')!='#'){opts.remote=$this.attr('href')}obj=new Modal(opts);$.data(this,pluginName,obj)}obj.show()})};$[pluginName]=function(options){return new Modal(options)};$.fn[pluginName].defaults={title:'&nbsp;',target:'#modal',content:'',appendTo:'body',cache:false,keyboard:false,nobackdrop:false};$(document).on('click.'+pluginName,'[data-trigger="modal"]',function(){$(this)[pluginName]();if($(this).is('a')){return false}}).on('click.'+pluginName,'[data-dismiss="modal"]',function(e){e.preventDefault();$(this).closest('.modal').trigger('close')})})(jQuery);
;(function($,undefined){"use strict";var pluginName='scojs_message';$[pluginName]=function(message,type,append){clearTimeout($[pluginName].timeout);var $selector=$('#'+$[pluginName].options.id);if(!$selector.length){$selector=$('<div/>',{id:$[pluginName].options.id}).appendTo($[pluginName].options.appendTo)}if(append!=undefined){$selector=$('<div/>',{id:"page_loading"}).appendTo($[pluginName].options.appendTo);$selector=$selector.appendTo(append)}if(type==undefined||type==$[pluginName].TYPE_ERROR){$selector.removeAttr("class").addClass($[pluginName].options.errClass);if(message==''){message="错误"}}else if(type==$[pluginName].TYPE_SUCCESS){$selector.removeAttr("class").addClass($[pluginName].options.sucClass);if(message==''){message="成功"}}else if(type==$[pluginName].TYPE_INFO){$selector.removeAttr("class").addClass($[pluginName].options.infoClass);if(message==''){message="提示"}}else if(type==$[pluginName].TYPE_WARNING){$selector.removeAttr("class").addClass($[pluginName].options.warnClass);if(message==''){message="警告"}}else if(type==$[pluginName].TYPE_DANGER){$selector.removeAttr("class").addClass($[pluginName].options.dangerClass);if(message==''){message="预警"}}else if(type==$[pluginName].TYPE_LOADING){$selector.removeAttr("class").addClass($[pluginName].options.loadingClass);if(message==''){message="<div class='status'><i class='fa fa-spinner fa-pulse'></i></div>"}else if(message=='loading'){message="<div class='preloading'><i class='fa fa-lg fa-spinner fa-spin'></i>加载中，请稍后...</div>"}}else if(type==$[pluginName].TYPE_NOTICE){$selector.removeAttr("class").addClass($[pluginName].options.noticeClass);if(message!=''){message=" "+message+""}}$selector.html(message);if(type!=$[pluginName].TYPE_LOADING){$selector.slideDown('fast',function(){$[pluginName].timeout=setTimeout(function(){$selector.slideUp('fast')},$[pluginName].options.delay)})}};$.extend($[pluginName],{options:{id:'page_message',content:'',errClass:'page_mess_error',sucClass:'page_mess_success',infoClass:'page_mess_info',warnClass:'page_mess_warning',dangerClass:'page_mess_danger',loadingClass:'preloader',noticeClass:'prenotice',delay:4000,appendTo:'body'},TYPE_ERROR:1,TYPE_SUCCESS:2,TYPE_INFO:3,TYPE_WARNING:4,TYPE_DANGER:5,TYPE_LOADING:6,TYPE_NOTICE:7})})(jQuery);
;(function($,undefined){"use strict";var pluginName='scojs_tooltip';function Tooltip($trigger,options){this.options=$.extend({},$.fn[pluginName].defaults,options);this.$trigger=this.$target=$trigger;this.leaveTimeout=null;this.$tooltip=$('<div class="tooltip"><div class="tipcontent"></div><div class="pointer"></div></div>').appendTo(this.options.appendTo).hide();if(this.options.contentElem!==undefined&&this.options.contentElem!==null){this.options.content=$(this.options.contentElem).html()}else if(this.options.contentAttr!==undefined&&this.options.contentAttr!==null){this.options.content=this.$trigger.attr(this.options.contentAttr)}if(this.$trigger&&this.$trigger.attr('title')){this.$trigger.data('originalTitle',this.$trigger.attr('title'))}this.$tooltip.find('.tipcontent').html(this.options.content);if(this.options.cssclass!=''){this.$tooltip.addClass(this.options.cssclass)}if(this.options.target!==undefined){this.$target=$(this.options.target)}if(this.options.hoverable){var self=this;this.$tooltip.on('mouseenter.'+pluginName,$.proxy(this.do_mouseenter,self)).on('mouseleave.'+pluginName,$.proxy(this.do_mouseleave,self)).on('close.'+pluginName,$.proxy(this.hide,self))}}$.extend(Tooltip.prototype,{show:function(allowMirror){if(allowMirror===undefined){allowMirror=true}this.$tooltip.removeClass('pos_w pos_e pos_n pos_s pos_nw pos_ne pos_se pos_sw pos_center').addClass('pos_'+this.options.position);var targetBox=this.$target.offset(),tooltipBox={left:0,top:0,width:Math.floor(this.$tooltip.outerWidth()),height:Math.floor(this.$tooltip.outerHeight())},pointerBox={left:0,top:0,width:Math.floor(this.$tooltip.find('.pointer').outerWidth()),height:Math.floor(this.$tooltip.find('.pointer').outerHeight())},docBox={left:$(document).scrollLeft(),top:$(document).scrollTop(),width:$(window).width(),height:$(window).height()};targetBox.left=Math.floor(targetBox.left);targetBox.top=Math.floor(targetBox.top);targetBox.width=Math.floor(this.$target.outerWidth());targetBox.height=Math.floor(this.$target.outerHeight());if(this.options.position==='w'){tooltipBox.left=targetBox.left-tooltipBox.width-pointerBox.width;tooltipBox.top=targetBox.top+Math.floor((targetBox.height-tooltipBox.height)/2);pointerBox.left=tooltipBox.width;pointerBox.top=Math.floor(targetBox.height/2)}else if(this.options.position==='e'){tooltipBox.left=targetBox.left+targetBox.width+pointerBox.width;tooltipBox.top=targetBox.top+Math.floor((targetBox.height-tooltipBox.height)/2);pointerBox.left=-pointerBox.width;pointerBox.top=Math.floor(tooltipBox.height/2)}else if(this.options.position==='n'){tooltipBox.left=targetBox.left-Math.floor((tooltipBox.width-targetBox.width)/2);tooltipBox.top=targetBox.top-tooltipBox.height-pointerBox.height-10;pointerBox.left=Math.floor(tooltipBox.width/2);pointerBox.top=tooltipBox.height}else if(this.options.position==='s'){tooltipBox.left=targetBox.left-Math.floor((tooltipBox.width-targetBox.width)/2);tooltipBox.top=targetBox.top+targetBox.height+pointerBox.height;pointerBox.left=Math.floor(tooltipBox.width/2);pointerBox.top=-pointerBox.height}else if(this.options.position==='nw'){tooltipBox.left=targetBox.left-tooltipBox.width+pointerBox.width;tooltipBox.top=targetBox.top-tooltipBox.height-pointerBox.height;pointerBox.left=tooltipBox.width-pointerBox.width;pointerBox.top=tooltipBox.height}else if(this.options.position==='ne'){tooltipBox.left=targetBox.left+targetBox.width-pointerBox.width;tooltipBox.top=targetBox.top-tooltipBox.height-pointerBox.height;pointerBox.left=1;pointerBox.top=tooltipBox.height}else if(this.options.position==='se'){tooltipBox.left=targetBox.left+targetBox.width-pointerBox.width;tooltipBox.top=targetBox.top+targetBox.height+pointerBox.height;pointerBox.left=1;pointerBox.top=-pointerBox.height}else if(this.options.position==='sw'){tooltipBox.left=targetBox.left-tooltipBox.width+pointerBox.width;tooltipBox.top=targetBox.top+targetBox.height+pointerBox.height;pointerBox.left=tooltipBox.width-pointerBox.width;pointerBox.top=-pointerBox.height}else if(this.options.position==='center'){tooltipBox.left=targetBox.left+Math.floor((targetBox.width-tooltipBox.width)/2);tooltipBox.top=targetBox.top+Math.floor((targetBox.height-tooltipBox.height)/2);allowMirror=false;this.$tooltip.find('.pointer').hide()}if(allowMirror){var newpos=this.options.position,do_mirror=false;if(tooltipBox.left<docBox.left){newpos=newpos.replace('w','e');do_mirror=true}else if(tooltipBox.left+tooltipBox.width>docBox.left+docBox.width){newpos=newpos.replace('e','w');do_mirror=true}if(tooltipBox.top<docBox.top){newpos=newpos.replace('n','s');do_mirror=true}else if(tooltipBox.top+tooltipBox.height>docBox.top+docBox.height){newpos=newpos.replace('s','n');do_mirror=true}if(do_mirror){this.options.position=newpos;this.show(false);return this}}var pointer_left=null,pointer_top=null;if(tooltipBox.left<docBox.left){pointer_left=tooltipBox.left-docBox.left-pointerBox.width/2;tooltipBox.left=docBox.left}else if(tooltipBox.left+tooltipBox.width>docBox.left+docBox.width){pointer_left=tooltipBox.left-docBox.left-docBox.width+tooltipBox.width-pointerBox.width/2;tooltipBox.left=docBox.left+docBox.width-tooltipBox.width}if(tooltipBox.top<docBox.top){pointer_top=tooltipBox.top-docBox.top-pointerBox.height/2;tooltipBox.top=docBox.top}else if(tooltipBox.top+tooltipBox.height>docBox.top+docBox.height){pointer_top=tooltipBox.top-docBox.top-docBox.height+tooltipBox.height-pointerBox.height/2;tooltipBox.top=docBox.top+docBox.height-tooltipBox.height}this.$tooltip.css({left:tooltipBox.left,top:tooltipBox.top});if(pointer_left!==null){this.$tooltip.find('.pointer').css('margin-left',pointer_left)}if(pointer_top!==null){this.$tooltip.find('.pointer').css('margin-top','+='+pointer_top)}this.$trigger.removeAttr('title');this.$tooltip.show();return this},hide:function(){if(this.$trigger.data('originalTitle')){this.$trigger.attr('title',this.$trigger.data('originalTitle'))}if(typeof this.options.on_close=='function'){this.options.on_close.call(this)}this.$tooltip.hide()},do_mouseenter:function(){if(this.leaveTimeout!==null){clearTimeout(this.leaveTimeout);this.leaveTimeout=null}this.show()},do_mouseleave:function(){var self=this;if(this.leaveTimeout!==null){clearTimeout(this.leaveTimeout);this.leaveTimeout=null}if(this.options.autoclose){this.leaveTimeout=setTimeout(function(){clearTimeout(self.leaveTimeout);self.leaveTimeout=null;self.hide()},this.options.delay)}}});$.fn[pluginName]=function(options){var method=null,first_run=false;if(typeof options=='string'){method=options}return this.each(function(){var obj;if(!(obj=$.data(this,pluginName))){var $this=$(this),data=$this.data(),opts;first_run=true;if(typeof options==='object'){opts=$.extend({},options,data)}else{opts=data}obj=new Tooltip($this,opts);$.data(this,pluginName,obj)}if(method){obj[method]()}else if(first_run){$(this).on('mouseenter.'+pluginName,function(){obj.do_mouseenter()}).on('mouseleave.'+pluginName,function(){obj.do_mouseleave()})}else{obj.show()}})};$[pluginName]=function(elem,options){if(typeof elem==='string'){elem=$(elem)}return new Tooltip(elem,options)};$.fn[pluginName].defaults={contentElem:null,contentAttr:null,content:'',hoverable:true,delay:200,cssclass:'',position:'n',autoclose:true,appendTo:'body'};$(document).on('mouseenter.'+pluginName,'[data-trigger="tooltip"]',function(){$(this)[pluginName]('do_mouseenter')}).on('mouseleave.'+pluginName,'[data-trigger="tooltip"]',function(){$(this)[pluginName]('do_mouseleave')});$(document).off('click.'+pluginName,'[data-dismiss="tooltip"]').on('click.'+pluginName,'[data-dismiss="tooltip"]',function(e){$(this).closest('.tooltip').trigger('close')})})(jQuery);
;(function($,undefined){"use strict";var pluginName='scojs_confirm';function Confirm(options){this.options=$.extend({},$.fn[pluginName].defaults,options);var $modal=$(this.options.target);if(!$modal.length){$modal=$('<div class="modal" id="'+this.options.target.substr(1)+'"><div class="modal-body inner"/><div class="modal-footer"><a href="#" class="btn btn-danger" data-action="1">确定</a><a class="btn cancel" href="#" data-dismiss="modal">取消</a> </div></div>').appendTo(this.options.appendTo).hide();if(typeof this.options.action=='function'){var self=this;$modal.find('[data-action]').attr('href','#').on('click.'+pluginName,function(e){e.preventDefault();self.options.action.call(self);self.close()})}else if(typeof this.options.action=='string'){$modal.find('[data-action]').attr('href',this.options.action)}}this.scomodal=$.scojs_modal(this.options)}$.extend(Confirm.prototype,{show:function(){this.scomodal.show();return this},close:function(){this.scomodal.close();return this},destroy:function(){this.scomodal.destroy();return this}});$.fn[pluginName]=function(options){return this.each(function(){var obj;if(!(obj=$.data(this,pluginName))){var $this=$(this),data=$this.data(),title=$this.attr('title')||data.title,opts=$.extend({},$.fn[pluginName].defaults,options,data);if(!title){title='this'}opts.content=opts.content.replace(':title',title);if(!opts.action){opts.action=$this.attr('href')}else if(typeof window[opts.action]=='function'){opts.action=window[opts.action]}obj=new Confirm(opts);$.data(this,pluginName,obj)}obj.show()})};$[pluginName]=function(options){return new Confirm(options)};$.fn[pluginName].defaults={content:'Are you sure you want to delete :title?',cssclass:'confirm_modal',target:'#confirm_modal',appendTo:'body'};$(document).on('click.'+pluginName,'[data-trigger="confirm"]',function(){$(this)[pluginName]();return false})})(jQuery);